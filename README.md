## Оглавление
- [Описание](#description)
- [Установка](#setup)
- [Примеры запросов через API](#examples)
- [Команда для добавления данных в базу](#command)

<a id=description></a>
## Описание
api_yamdb - проект, выполненый с использованием библиотеки [Django REST Framework](https://www.django-rest-framework.org/) фреймворка [Django](https://www.djangoproject.com/). Проект позволяет пользователям публиковать отзывы на произведения различных категорий (музыка, фильмы и т.д.). Категории произведений и сами произведения создаются администратором. Кроме прав администратора, пользователи могут обладать правами модератора или аутентифицированного пользователя или анонимного пользователя. Суперпользователь обладает правами администратора. Произведению может быть присвоен один или несколько жанров. К отзывам на произведения пользователи могут оставлять комментарии. Обмен информацией между клиентами пользователей и сервером происходит посредством интерфейса API. Проект может быть полезен тем, кто хочет выбрать какой фильм посмотреть, какую музыку послушать, какую книгу почитать. Для этого пользователь может почитать различные отзывы на произведения, комментарии к отзывам, и решить, стоит ли произведение его внимания. А после того как пользователь посмотрит фильм, прочитает книгу, или послушает какое-то музыкальное произведение, он может оставить свой отзыв на него, обсудить его в комментариях к отзыву. Проект api_yamdb предоставляет широкие возможности для этого. :upside_down_face:

---
<a id=setup></a>
## Установка
Для установки проекта Вам необходимо его установить с помощью утилиты Git. С помощью консоли перейдите в папку, в которую будет установлен проект: `cd <папка_назначения>`. После этого клонируйте проект в папку назначения:
```
git clone <url репозитория на github>
```
Дождитесь сообщения о том, что проект успешно клонирован и перейдите в папку проекта:
```
cd api_final_yatube/
```
Разверните виртуальное окружение:
```
python -m venv venv
```
В команде `python -m venv venv` и далее, "python" вводить в ОС Windows. В Linux вводить "python3" (Python третьей версии должен быть предварительно устанолен в вашей системе).
Активируйте виртуальное окружение:
```
source venv/Scripts/activate    # Windows
source venv/bin/activate        # Linux
```
Обновите pip и установите зависимости:
```
python -m pip install --upgrade pip
```
```
pip install -r requirements.txt
```
Создайте файл миграций и выполните миграции:
```
python manage.py makemigrations
```
```
python manage.py migrate
```
Запустите проект:
```
python manage.py runserver
```
---
<a id=examples></a>
## Примеры запросов через API
##### GET-запрос на получение списка произведений
Запрос могут выполнять авторизованные и неавторизованные пользователи. Чтобы получить все публикации, необходимо выполнить GET-запрос к эндпоинту:
```
http://127.0.0.1:8000/api/v1/titles/
```
Пример ответа:
```
[
    {
        "count": 0,
        "next": "string",
        "previous": "string",
        "results": [
            {
                "id": 0,
                "name": "string",
                "year": 0,
                "rating": 0,
                description": "string",
                "genre": [
                    {
                        "name": "string",
                        "slug": "string"
                    }
                        ],
                "category": 
                    {
                        "name": "string",
                        "slug": "string"
                    }
            }
        ]
    }
]
```

##### GET-запрос на получение списка публикаций с пагинацией
Также доступна пагинация. Можно в запросе указывать количество произведений, которые должны выводится на страницу - парамет `limit`. А также указывать параметр `offset`. Публикации будут выводится на страницу начиная со следующего по порядку номеру после номера, переданного в параметре `offset`. Например, чтобы получить два произведения на странице, начиная с четвертого (`offset=3`), необходимо выполнить GET-запрос к эндпоинту:
```
http://127.0.0.1:8000/api/v1/titles/?limit=2&offset=3
```
Пример ответа:
```
[
    {
        "count": 6,
        "next": "http://127.0.0.1:8000/api/v1/titles/?limit=2&offset=5",
        "previous": "http://127.0.0.1:8000/api/v1/titles/?limit=2&offset=1",
        "results": [
            {
                "id": 0,
                "name": "string",
                "year": 0,
                "rating": 0,
                description": "string",
                "genre": [
                    {
                        "name": "string",
                        "slug": "string"
                    }
                        ],
                "category": 
                    {
                        "name": "string",
                        "slug": "string"
                    }
            }
        ]
    }
]
```
Примеры других запросов и ответов можно посмотреть в браузере. Для этого при запущенном приложении необходимо ввести в строку браузера `http://127.0.0.1:8000/redoc/`.

---
<a id=command></a>
## Команда для добавления данных в базу
Для переноса данных из файлов формата .csv в базу данных в консоли введите команду:
```
python manage.py load_data
```
При этом в папке static/data/ должны быть следующие файлы:
- category.csv
- comments.csv
- genre_title.csv
- review.csv
- title.csv
- users.csv
